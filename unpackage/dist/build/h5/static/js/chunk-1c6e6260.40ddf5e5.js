(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-1c6e6260"],{2202:function(e,t,n){"use strict";n.r(t);var i=n("9257"),a=n.n(i);for(var o in i)"default"!==o&&function(e){n.d(t,e,function(){return i[e]})}(o);t["default"]=a.a},"3caa":function(e,t,n){t=e.exports=n("2350")(!1),t.push([e.i,".cu-btn[data-v-4e1a4597]{\r\n\t/* padding:0;\r\n\twidth: 4rem; */}",""])},"52fc":function(e,t,n){"use strict";var i,a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-uni-view",{},[n("v-uni-view",{staticClass:"grid col-6 padding-sm"},e._l(e.treeData,function(t,i){return n("v-uni-view",{key:i,staticClass:"margin-tb-sm text-center text-cut",on:{click:function(n){arguments[0]=n=e.$handleEvent(n),e.onclick(t,i)}}},[n("v-uni-button",{staticClass:"cu-btn round ",class:t[e.nodeKey]===e.activeNode[e.nodeKey]?"bg-blue  text-white":"lines-gray"},[e._v(e._s(t[e.disColName])),t._childNode.length>0&&t[e.nodeKey]!==e.activeNode[e.nodeKey]?n("v-uni-text",{staticClass:"lg text-green cuIcon-right"}):e._e(),t._childNode.length>0&&t[e.nodeKey]===e.activeNode[e.nodeKey]?n("v-uni-text",{staticClass:"lg text-white cuIcon-down"}):e._e()],1)],1)}),1),e.childNode.length>0?n("childGrid",{staticClass:"solid",attrs:{name:e.activeNode[e.nodeKey],treeData:e.childNode,childNodeCol:e.childNodeCol,disColName:e.disColName,nodeKey:e.nodeKey},on:{"on-tree-lastcode":function(t){arguments[0]=t=e.$handleEvent(t),e.onTree.apply(void 0,arguments)}}}):e._e()],1)},o=[];n.d(t,"b",function(){return a}),n.d(t,"c",function(){return o}),n.d(t,"a",function(){return i})},"5e82":function(e,t,n){"use strict";var i=n("7699"),a=n.n(i);a.a},6405:function(e,t,n){t=e.exports=n("2350")(!1),t.push([e.i,".cu-modal[data-v-5a55153c]{z-index:9999}.vertical-ui[data-v-5a55153c]{display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-webkit-flex-direction:column;flex-direction:column}",""])},7699:function(e,t,n){var i=n("3caa");"string"===typeof i&&(i=[[e.i,i,""]]),i.locals&&(e.exports=i.locals);var a=n("4f06").default;a("ca712c82",i,!0,{sourceMap:!1,shadowMode:!1})},8228:function(e,t,n){"use strict";var i=n("f869"),a=n.n(i);a.a},"8d02":function(e,t,n){"use strict";var i,a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-uni-view",[n("v-uni-view",{staticClass:"padding-sm flex flex-wrap",on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.onShowModal.apply(void 0,arguments)}}},[n("v-uni-view",{staticClass:"padding-sm flex flex-wrap"},[e._l(e.selected,function(t,i){return e.isTree?e._e():n("v-uni-view",{key:i},[n("v-uni-view",{staticClass:"cu-tag cf line-green padding-xs"},[e._v(e._s(t[e.options.key_disp_col])),n("v-uni-text",{staticClass:"fr lg text-green cuIcon-check"})],1)],1)}),e._l(e.selectedPathNodeDatas,function(t,i){return e.isTree?n("v-uni-view",{key:i},[n("v-uni-view",{staticClass:"cu-tag cf  padding-xs",class:i===e.selectedPathNodeDatas.length-1?"line-green":"line-blue"},[e._v(e._s(t[e.options.key_disp_col])),i===e.selectedPathNodeDatas.length-1?n("v-uni-text",{staticClass:"fr lg text-green cuIcon-check"}):e._e()],1),n("v-uni-text",{staticClass:"lg text-gray cuIcon-right"})],1):e._e()}),e.isTree?n("v-uni-view",{},[n("v-uni-text",{staticClass:"cu-tag line-gray padding-xs"},[e._v("更多")])],1):e._e()],2)],1),n("v-uni-view",{staticClass:"cu-modal bottom-modal",class:e.showModal?"show":""},[n("v-uni-view",{staticClass:"cu-dialog"},[n("v-uni-view",{staticClass:"cu-bar bg-white"},[n("v-uni-view",{staticClass:"action text-blue",on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.hideModal.apply(void 0,arguments)}}},[e._v("取消")]),n("v-uni-view",{staticClass:"action text-green",on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.submit.apply(void 0,arguments)}}},[e._v("确定")])],1),n("v-uni-view",{staticClass:"padding-xl"},[e.isTree?e._e():n("v-uni-view",[n("v-uni-view",{staticClass:"padding-sm flex flex-wrap"},e._l(e.treeDatas,function(t,i){return n("v-uni-view",{key:i,staticClass:"padding-xs",on:{click:function(n){arguments[0]=n=e.$handleEvent(n),e.onSelected(t)}}},[n("v-uni-view",{staticClass:"cu-tag ",class:e.isInSelected(t)?"line-green":"line-blue"},[e._v(e._s(t[e.options.key_disp_col])),e.isInSelected(t)?n("v-uni-text",{staticClass:"fr lg text-green cuIcon-check"}):e._e()],1)],1)}),1)],1),e.isTree?n("v-uni-view",[n("v-uni-view",{staticClass:"padding-sm flex flex-wrap",class:e.layoutClass},e._l(e.selectedPathNodeDatas,function(t,i){return n("v-uni-view",{key:i,staticClass:"cf",on:{click:function(n){n.stopPropagation(),arguments[0]=n=e.$handleEvent(n),e.onSelectedPath(t,i)}}},[n("v-uni-view",{staticClass:"cu-tag cf  padding-xs margin-xs",class:i===e.selectedPathNodeDatas.length-1?"line-green":"line-blue"},[e._v(e._s(t[e.options.key_disp_col])),i===e.selectedPathNodeDatas.length-1?n("v-uni-text",{staticClass:"fr lg text-green cuIcon-check"}):e._e()],1),i!==e.selectedPathNodeDatas.length-1&&"horizontal-ui"===e.layoutClass?n("v-uni-text",{staticClass:"lg text-gray cuIcon-right"}):e._e(),i!==e.selectedPathNodeDatas.length-1&&"vertical-ui"===e.layoutClass?n("v-uni-text",{staticClass:"lg text-gray cuIcon-down"}):e._e()],1)}),1),n("v-uni-view",{staticClass:"padding-sm flex flex-wrap solid bg-white"},e._l(e.treeActiveNodes,function(t,i){return n("v-uni-view",{key:i,staticClass:"padding-xs",on:{click:function(n){arguments[0]=n=e.$handleEvent(n),e.onSelected(t,i)}}},[n("v-uni-view",{staticClass:"cf cu-tag ",class:e.isInSelected(t)?"line-green":"line-gray"},[e._v(e._s(t[e.options.key_disp_col])),i===e.isInSelected(t)?n("v-uni-text",{staticClass:"fr lg text-green cuIcon-check"}):e._e()],1)],1)}),1)],1):e._e()],1)],1)],1)],1)},o=[];n.d(t,"b",function(){return a}),n.d(t,"c",function(){return o}),n.d(t,"a",function(){return i})},9257:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i={name:"tree-grid",components:{childGrid:function(e){return Promise.resolve().then(n.bind(null,"ee4e"))}},props:{treeData:{type:Array,default:function(){return[]}},childNodeCol:{type:String,default:function(){return""}},nodeKey:{type:String,default:function(){return""}},disColName:{type:String,default:function(){return""}},selectedTreeData:{type:Array,default:function(){return[]}}},data:function(){return{activeNode:{},childNode:[]}},created:function(){},onLoad:function(e){},methods:{onTree:function(e){0===e.item._childNode.length&&this.$emit("on-tree-lastcode",e)},onclick:function(e,t){0===e._childNode.length?(console.log("onclick",e,t),this.$emit("on-tree-lastcode",{item:e,index:t})):this.activeNode[this.nodeKey]===e[this.nodeKey]?(this.activeNode={},this.childNode=[]):(this.activeNode=e,this.childNode=e[this.childNodeCol]),this.$emit("on-tree-grid-change",{item:e,index:t})}},watch:{treeData:{handler:function(e,t){console.log("------new  VAL",e),this.childNode=[],this.activeNode={}},deep:!0}}};t.default=i},9634:function(e,t,n){"use strict";var i=n("288e");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=i(n("bd86"));n("a481");var o=i(n("5d73"));n("28a5");var s=i(n("5176"));n("96cf");var c,d=i(n("3b8d")),l=i(n("ee4e")),r=(c={components:{bxTreeGrid:l.default},props:{isMultiple:{type:Boolean,default:!1},options:{type:Object,default:function(){return{}}},displayColumn:{type:String,default:function(){return""}},defaultValue:{type:String,default:function(){return""}},fieldsModel:{type:Object,default:function(){return{}}},treeChildNodeCol:{type:String,default:function(){return"_childNode"}},readOnly:{type:Boolean,default:!1},treeForeignKey:{type:Object,default:function(){return{parentNoColName:"parent_no",colKeyName:"no"}}},dataLoadType:{type:String,default:function(){return"options"}},layout:{type:String,default:function(){return"vertical"}},nodeDatas:{type:Array,default:function(){return[]}}},data:function(){return{selected:[],selectedPathNodeNo:[],selectedPathNodeDatas:[],selectedNodeIndex:[],selectedDisplay:"",showModal:!1,treeDatas:[],bxtreeDatas:[],isTree:!1,treeActiveNodesLevel:null,activeContext:{},activePathIndex:null,activePathNode:{},activePathNodeIndex:[],childNode:[],isAgainSelected:!1,onViewType:"path"}},computed:{activePathIndexPlus:{get:function(){return this.activePathIndex},set:function(e){this.activePathIndex=e}},treeActiveNodes:{get:function(){return this.activeContext},set:function(e){this.activeContext=e}},layoutClass:function(){return"vertical"===this.layout?"vertical-ui":"horizontal-ui"}},created:function(){this.isMultiple,this.selected=[],this.isTree=!!this.options.hasOwnProperty("is_tree")&&this.options.is_tree,console.log("bx-tree-selector 加载了 ---------- ！"),this.loadTreeData()},onLoad:function(){},onShow:function(){},methods:{submit:function(){var e=this.selectedPathNodeDatas[this.selectedPathNodeDatas.length-1][this.treeForeignKey.colKeyName];this.$emit("on-tree-change",e),this.hideModal()},hideModal:function(){this.showModal=!1},onShowSelector:function(){this.loadTreeData()},getOnPathChildShowNodes:function(e){var t=this.bxtreeDatas,n=this.decodeTreePath(e),i=this.getInTreeIndex(t,n.nodeNo,[]);console.log("indexs",i),this.getTreeNode(i,this.bxtreeDatas),console.log("onNodes",n)},onSelectedPath:function(){var e=(0,d.default)(regeneratorRuntime.mark(function e(t,n){var i,a,o,c;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return i=this,i.onViewType="path",this.getOnPathChildShowNodes(t),i.activePathNode={},i.activePathNode=(0,s.default)(t),this.activePathIndex=n,i.activePathIndexPlus=n,e.next=9,i.decodeTreePath(t);case 9:return a=e.sent,o=a.nodeNo,a.pathNodeDatas,e.next=14,i.getInTreeIndex(i.bxtreeDatas,o,[]);case 14:c=e.sent,i.activePathNodeIndex=c.map(function(e){return console.log(e),e}),this.$forceUpdate();case 17:case"end":return e.stop()}},e,this)}));function t(t,n){return e.apply(this,arguments)}return t}(),getTreeNode:function(e,t){var n=this,i=t,a=[];if(e.length>0)for(var o=0;o<e.length;o++)a=this.deepClone(i),i=i[e[o]][this.treeChildNodeCol];return n.activeContext={},n.activeContext=(0,s.default)({node:i,parentNoses:a}),"path"===n.onViewType?n.treeActiveNodes=a:"nodes"===n.onViewType&&(0===i.length?n.treeActiveNodes=a:n.treeActiveNodes=i),console.log("上下级",{node:i,parentNoses:a}),{node:i,parentNoses:a}},getInTreeIndex:function(e,t,n){var i=n,a=[];if(t.length>0&&e.length>0){for(var o=0;o<e.length;o++)e[o][this.options.refed_col]===t[n.length]&&(i.push(o),e[o].hasOwnProperty(this.treeChildNodeCol)&&(a=e[o][this.treeChildNodeCol]));return i.length<t.length?this.getInTreeIndex(a,t,i):i}console.error("getInTreeIndex传入值错误")},isInSelected:function(e){return this.isTree?e[this.options.refed_col]===this.selectedPathNodeDatas[this.selectedPathNodeDatas.length-1][this.options.refed_col]:e[this.options.refed_col]===this.selected[this.selected.length-1][this.options.refed_col]},decodeTreePath:function(e){var t=this,n=e.path,i=n.split("/");i=i.filter(function(e){return""!==e});this.treeDatas;var a=[],s=!0,c=!1,d=void 0;try{for(var l,r=function(){var e=l.value;t.treeDatas.map(function(n,i){e===n[t.treeForeignKey.colKeyName]&&a.push(n)})},u=(0,o.default)(i);!(s=(l=u.next()).done);s=!0)r()}catch(h){c=!0,d=h}finally{try{s||null==u.return||u.return()}finally{if(c)throw d}}return{nodeNo:i,pathNodeDatas:a}},onInitialSelected:function(e){var t=this,n=this;if(n.selected=n.treeDatas.filter(function(n){if(n[t.options.refed_col]===e)return n}),this.selected.length>0&&this.isTree){var i=this.decodeTreePath(this.selected[0]);this.selectedPathNodeNo=i.nodeNo,this.selectedPathNodeDatas=i.pathNodeDatas,this.selectedNodeIndex=this.getInTreeIndex(this.bxtreeDatas,this.selectedPathNodeNo,[]),this.activePathNodeIndex=this.selectedNodeIndex,this.activePathIndex=i.pathNodeDatas.length-1,this.activePathNode=i.pathNodeDatas[i.pathNodeDatas.length-1],this.getOnPathChildShowNodes(this.selectedPathNodeDatas[this.selectedPathNodeDatas.length-1])}},onSelected:function(e,t){this.onViewType="nodes",this.isTree&&(this.getOnPathChildShowNodes(e),e[this.options.refed_col]!==this.selectedPathNodeDatas[this.activePathIndex][this.options.refed_col]?(console.log("点击了不同项：",this.selectedPathNodeDatas[this.activePathIndex],e),this.treeUpdatePath(e,t)):console.log("点击了相同项：",this.selectedPathNodeDatas[this.activePathIndex],e))},treeUpdatePath:function(e,t){if(!this.isAgainSelected){var n=this.decodeTreePath(e),i=n.nodeNo,a=n.pathNodeDatas,o=this.getInTreeIndex(this.bxtreeDatas,i,[]);this.selectedPathNodeNo=i,this.selectedPathNodeDatas=a,this.selectedNodeIndex=o}},onShowModal:function(){this.readOnly||(this.isAgainSelected=!1,this.showModal=!this.showModal)},loadTreeData:function(e){var t=this;if("nodes"===this.dataLoadType)this.treeDatas=this.nodeDatas,this.bxtreeDatas=this.treeReform(this.treeDatas,this.treeForeignKey.parentNoColName,this.treeForeignKey.colKeyName),this.onInitialSelected(this.defaultValue);else{var n=this.selectRequestObjs(this.options.serviceName,this.options.conditions),i=uni.getStorageSync("activeApp");if(n.serviceName=this.options.serviceName,n.condition=this.options.conditions,this.options.conditions.length>0&&this.options.conditions[0].value.indexOf("'")>-1)this.options.conditions[0].value=this.options.conditions[0].value.replace(/[']/g,"");else if(this.options.conditions[0].value.indexOf("data")>-1){var a=this.options.conditions[0].value.slice(this.options.conditions[0].value.indexOf(".")+1,this.options.conditions[0].value.length);this.options.conditions[0].value=this.fieldsModel[a]}this.options.hasOwnProperty("app")&&(i=this.options.app),this.onRequest("select",this.options.serviceName,n,i).then(function(e){t.treeDatas=e.data.data,t.isTree&&(t.bxtreeDatas=t.treeReform(t.treeDatas,t.treeForeignKey.parentNoColName,t.treeForeignKey.colKeyName)),t.onInitialSelected(t.defaultValue)})}}}},(0,a.default)(c,"onLoad",function(){}),(0,a.default)(c,"watch",{showModal:{handler:function(e,t){e&&(this.onViewType="nodes",this.loadTreeData())}}}),c);t.default=r},ea10:function(e,t,n){"use strict";n.r(t);var i=n("8d02"),a=n("f544");for(var o in a)"default"!==o&&function(e){n.d(t,e,function(){return a[e]})}(o);n("8228");var s,c=n("f0c5"),d=Object(c["a"])(a["default"],i["b"],i["c"],!1,null,"5a55153c",null,!1,i["a"],s);t["default"]=d.exports},ee4e:function(e,t,n){"use strict";n.r(t);var i=n("52fc"),a=n("2202");for(var o in a)"default"!==o&&function(e){n.d(t,e,function(){return a[e]})}(o);n("5e82");var s,c=n("f0c5"),d=Object(c["a"])(a["default"],i["b"],i["c"],!1,null,"4e1a4597",null,!1,i["a"],s);t["default"]=d.exports},f544:function(e,t,n){"use strict";n.r(t);var i=n("9634"),a=n.n(i);for(var o in i)"default"!==o&&function(e){n.d(t,e,function(){return i[e]})}(o);t["default"]=a.a},f869:function(e,t,n){var i=n("6405");"string"===typeof i&&(i=[[e.i,i,""]]),i.locals&&(e.exports=i.locals);var a=n("4f06").default;a("d628b4c0",i,!0,{sourceMap:!1,shadowMode:!1})}}]);